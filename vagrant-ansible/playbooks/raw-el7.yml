---
- hosts: all
  name: Raw Installation (RedHat)
  sudo: yes
  gather_facts: False

  tasks:
    - name: Make sure playbook dependencies are installed
      raw: >
        for REPO in `find /home/vagrant/sync/playbooks -name '*.repo'`; do
          cp $REPO /etc/yum.repos.d/;
        done;
        mkdir -p /tmp/vagrant-cache/yum/x86_64;
        yum install -y centos-release-gluster;
        yum install -y {{ install_pkgs }};
#        cd /etc/yum.repos.d/;
#        curl -O http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/glusterfs-epel.repo;
#        curl -O http://download.gluster.org/pub/gluster/glusterfs/nfs-ganesha/2.1.0/EPEL.repo/nfs-ganesha.repo;
#        curl -O http://download.gluster.org/pub/gluster/glusterfs/samba/EPEL.repo/glusterfs-samba-epel.repo;
#        rpm --import http://download.gluster.org/pub/gluster/glusterfs/samba/EPEL.repo/pub.key;
#        rpm --import http://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-{{ el_ver }};
#        yum install -y http://dl.fedoraproject.org/pub/epel/epel-release-latest-{{ el_ver }}.noarch.rpm; 
